do print("Starting Matcha Miner v14.3...");local Players=game:GetService("Players");local LocalPlayer=Players.LocalPlayer;if  not LocalPlayer then repeat wait(1);LocalPlayer=Players.LocalPlayer;until LocalPlayer end local UILib={};UILib.__index=UILib;local ESP_FONTSIZE=13;local BLACK=Color3.new(0,0,0);local myPlayer=LocalPlayer;local myMouse=myPlayer:GetMouse();local function clamp(x,a,b) if (x>b) then return b;elseif (x<a) then return a;else return x;end end local function getMousePos() return Vector2.new(myMouse.X,myMouse.Y);end local function lerp(a,b,t) return a + ((b-a) * t) ;end local function undrawAll(t) for _,d in pairs(t) do d.Visible=false;end end local function destroyAllDrawings(t) for _,d in pairs(t) do d:Remove();end end UILib.new=function(name,size,watermarkActivity) local self=setmetatable({},UILib);self._inputs={m1={id=1,held=false,click=false},["end"]={id=35,held=false,click=false}};self._active_tab=nil;self._open=true;self._last_open_state=nil;self._watermark=true;self._base_opacity=0;self._tick=os.clock();self.identity=name;self._watermark_activity=watermarkActivity;self.x,self.y=20,60;self.w=(size and size.x) or 300 ;self.h=(size and size.y) or 400 ;self._active_dropdown=nil;self._color_accent=Color3.fromRGB(255,127,0);self._color_text=Color3.fromRGB(255,255,255);self._color_crust=Color3.fromRGB(0,0,0);self._color_border=Color3.fromRGB(25,25,25);self._color_surface=Color3.fromRGB(38,38,38);self._color_overlay=Color3.fromRGB(76,76,76);self._title_h,self._tab_h,self._padding=25,20,6;local function newDraw(type,props) local d=Drawing.new(type);for k,v in pairs(props) do d[k]=v;end return d;end local base=newDraw("Square",{Filled=true,Color=self._color_surface});local crust=newDraw("Square",{Filled=false,Thickness=1,Color=self._color_crust});local border=newDraw("Square",{Filled=false,Thickness=1,Color=self._color_border});local navbar=newDraw("Square",{Filled=true,Color=self._color_border});local title=newDraw("Text",{Text=self.identity,Outline=true,Color=self._color_text});local wmBase=newDraw("Square",{Filled=true,Color=self._color_surface});local wmCursor=newDraw("Square",{Filled=true,Color=self._color_accent});local wmCrust=newDraw("Square",{Filled=false,Thickness=1,Color=self._color_crust});local wmBorder=newDraw("Square",{Filled=false,Thickness=1,Color=self._color_border});local wmText=newDraw("Text",{Text=name,Outline=true,Color=self._color_text});self._tree={_tabs={},_drawings={crust,border,base,navbar,title,wmBase,wmCursor,wmCrust,wmBorder,wmText}};return self;end;UILib._GetTextBounds=function(str) return  #str * 7 ,13;end;UILib._IsMouseWithinBounds=function(origin,size) local m=getMousePos();return (m.x>=origin.x) and (m.x<=(origin.x + size.x)) and (m.y>=origin.y) and (m.y<=(origin.y + size.y)) ;end;UILib.ToggleMenu=function(self,state) self._open=state;end;UILib._RemoveDropdown=function(self) if self._active_dropdown then destroyAllDrawings(self._active_dropdown['_drawings']);self._active_dropdown=nil;end end;UILib._SpawnDropdown=function(self,default,choices,callback,position,width) if self._active_dropdown then self:_RemoveDropdown();end local drawings={};local base=Drawing.new("Square");base.Filled=true;base.Color=self._color_surface;table.insert(drawings,base);local border=Drawing.new("Square");border.Filled=false;border.Thickness=1;border.Color=self._color_border;table.insert(drawings,border);if  not choices then choices={};end for _,choice in ipairs(choices) do local t=Drawing.new("Text");t.Outline=true;t.Color=self._color_text;t.Text=tostring(choice);table.insert(drawings,t);end self._active_dropdown={choices=choices,callback=callback,pos=position,w=width,_drawings=drawings};end;UILib.Tab=function(self,name) local backdrop=Drawing.new("Square");backdrop.Color=self._color_border;backdrop.Filled=true;local shadow=Drawing.new("Square");shadow.Color=BLACK;shadow.Filled=true;local cursor=Drawing.new("Square");cursor.Color=self._color_accent;cursor.Filled=true;local text=Drawing.new("Text");text.Color=self._color_text;text.Outline=true;text.Text=name;table.insert(self._tree['_tabs'],{name=name,_sections={},_drawings={backdrop,shadow,cursor,text}});if (self._active_tab==nil) then self._active_tab=name;end return name;end;UILib.Section=function(self,tabName,name) for _,tab in ipairs(self._tree['_tabs']) do if (tab['name']==tabName) then local base=Drawing.new("Square");base.Filled=true;base.Color=self._color_surface;local crust=Drawing.new("Square");crust.Filled=false;crust.Thickness=1;crust.Color=self._color_crust;local border=Drawing.new("Square");border.Filled=false;border.Thickness=1;border.Color=self._color_overlay;local title=Drawing.new("Text");title.Text=name;title.Outline=true;title.Color=self._color_text;local section={name=name,_items={},_drawings={base,crust,border,title}};table.insert(tab._sections,section);return name;end end end;UILib._AddToSection=function(self,tabName,sectionName,item) for _,tab in pairs(self._tree._tabs) do if (tab.name==tabName) then for _,section in pairs(tab._sections) do if (section.name==sectionName) then table.insert(section._items,item);return;end end end end end;UILib.Checkbox=function(self,tabName,sectionName,label,defaultValue,callback) local outline=Drawing.new("Square");outline.Color=self._color_crust;outline.Thickness=1;outline.Filled=false;local check=Drawing.new("Square");check.Color=self._color_accent;check.Filled=true;local checkShadow=Drawing.new("Square");checkShadow.Color=BLACK;checkShadow.Filled=true;local text=Drawing.new("Text");text.Color=self._color_text;text.Outline=true;text.Text=label;self:_AddToSection(tabName,sectionName,{type="checkbox",value=defaultValue,callback=callback,_drawings={outline,check,checkShadow,text}});end;UILib.Slider=function(self,tabName,sectionName,label,defaultValue,callback,min,max,step,appendix) local outline=Drawing.new("Square");outline.Color=self._color_crust;outline.Filled=true;local fill=Drawing.new("Square");fill.Color=self._color_accent;fill.Filled=true;local fillShadow=Drawing.new("Square");fillShadow.Color=BLACK;fillShadow.Filled=true;local value=Drawing.new("Text");value.Color=self._color_text;value.Outline=true;value.Text=label;local text=Drawing.new("Text");text.Color=self._color_text;text.Outline=true;text.Text=label;self:_AddToSection(tabName,sectionName,{type="slider",value=defaultValue,callback=callback,min=min,max=max,step=step,appendix=appendix,_drawings={outline,fill,fillShadow,value,text}});end;UILib.Choice=function(self,tabName,sectionName,label,defaultValue,callback,choices) local outline=Drawing.new("Square");outline.Color=self._color_crust;outline.Thickness=1;outline.Filled=false;local fill=Drawing.new("Square");fill.Color=self._color_crust;fill.Filled=true;local initialText=defaultValue;if (type(defaultValue)=="table") then if ( #defaultValue==0) then initialText="None";else initialText=table.concat(defaultValue,", ");end end local valText=Drawing.new("Text");valText.Color=self._color_text;valText.Outline=true;valText.Text=tostring(initialText);local labelText=Drawing.new("Text");labelText.Color=self._color_text;labelText.Outline=true;labelText.Text=label;local item={type="choice",value=defaultValue,callback=callback,choices=choices,_drawings={outline,fill,valText,labelText}};self:_AddToSection(tabName,sectionName,item);return item;end;UILib.DualChoice=function(self,tabName,sectionName,label1,default1,cb1,choices1,label2,default2,cb2,choices2) local out1=Drawing.new("Square");out1.Color=self._color_crust;out1.Thickness=1;out1.Filled=false;local fill1=Drawing.new("Square");fill1.Color=self._color_crust;fill1.Filled=true;local text1=tostring(default1);if (type(default1)=="table") then if ( #default1>0) then text1=table.concat(default1,", ");else text1="None";end end local val1=Drawing.new("Text");val1.Color=self._color_text;val1.Outline=true;val1.Text=text1;local lbl1=Drawing.new("Text");lbl1.Color=self._color_text;lbl1.Outline=true;lbl1.Text=label1;local out2=Drawing.new("Square");out2.Color=self._color_crust;out2.Thickness=1;out2.Filled=false;local fill2=Drawing.new("Square");fill2.Color=self._color_crust;fill2.Filled=true;local text2=tostring(default2);if (type(default2)=="table") then if ( #default2>0) then text2=table.concat(default2,", ");else text2="None";end end local val2=Drawing.new("Text");val2.Color=self._color_text;val2.Outline=true;val2.Text=text2;local lbl2=Drawing.new("Text");lbl2.Color=self._color_text;lbl2.Outline=true;lbl2.Text=label2;local item={type="dual_choice",v1=default1,cb1=cb1,ch1=choices1 or {} ,v2=default2,cb2=cb2,ch2=choices2 or {} ,_drawings={out1,fill1,val1,lbl1,out2,fill2,val2,lbl2}};self:_AddToSection(tabName,sectionName,item);return item;end;UILib.Step=function(self) local deltaTime=math.max(os.clock() -self._tick ,0.0035);local mousePos=getMousePos();local m1=iskeypressed(1);if (m1 and  not self._inputs.m1.held) then self._inputs.m1.click=true;else self._inputs.m1.click=false;end self._inputs.m1.held=m1;local menuOpen=self._open;local clickFrame=menuOpen and self._inputs.m1.click ;local baseOpacity=self._base_opacity;local childrenVisible=baseOpacity>0.22 ;self._base_opacity=clamp(lerp(baseOpacity,(menuOpen and 1) or 0 ,deltaTime * 11 ),0,1);if (self._last_open_state~=menuOpen) then setrobloxinput( not menuOpen);self._last_open_state=menuOpen;end local wmBase,wmCursor,wmCrust,wmBorder,wmTitle=unpack(self._tree['_drawings'],6,10);if self._watermark then local statusText=self.identity;if self._watermark_activity then for _,act in ipairs(self._watermark_activity) do local s=act();if s then statusText=statusText   .. " | "   .. s ;end end end local wmW= #statusText * 7 ;local wmPos=Vector2.new(20,20);local wmSize=Vector2.new(wmW + 18 ,30);wmBase.Position=wmPos;wmBase.Size=wmSize;wmBase.Visible=true;wmCrust.Position=wmPos;wmCrust.Size=wmSize;wmCrust.Visible=true;wmBorder.Position=wmPos + Vector2.new(1,1) ;wmBorder.Size=wmSize + Vector2.new( -2, -2) ;wmBorder.Visible=true;wmCursor.Position=wmPos + Vector2.new(2,2) ;wmCursor.Size=Vector2.new(wmSize.x-4 ,1);wmCursor.Visible=true;wmTitle.Position=wmPos + Vector2.new(8,8) ;wmTitle.Text=statusText;wmTitle.Visible=true;else wmBase.Visible=false;wmTitle.Visible=false;end local uiCrust,uiBorder,uiBase,uiNavbar,uiTitle=unpack(self._tree['_drawings'],1,5);uiBase.Position=Vector2.new(self.x,self.y);uiBase.Size=Vector2.new(self.w,self.h);uiBase.Transparency=baseOpacity;uiBase.Visible=childrenVisible;uiBorder.Position=Vector2.new(self.x + 1 ,self.y + 1 );uiBorder.Size=Vector2.new(self.w-2 ,self.h-2 );uiBorder.Transparency=baseOpacity;uiBorder.Visible=childrenVisible;uiCrust.Position=Vector2.new(self.x,self.y);uiCrust.Size=Vector2.new(self.w,self.h);uiCrust.Transparency=baseOpacity;uiCrust.Visible=childrenVisible;uiNavbar.Position=Vector2.new(self.x + 2 ,self.y + 2 );uiNavbar.Size=Vector2.new(self.w-4 ,self._title_h-4 );uiNavbar.Transparency=baseOpacity;uiNavbar.Visible=childrenVisible;uiTitle.Position=Vector2.new(self.x + 7 ,self.y + 4 );uiTitle.Transparency=baseOpacity;uiTitle.Visible=childrenVisible;local titleRect=Vector2.new(self.w,self._title_h);if (self._IsMouseWithinBounds(Vector2.new(self.x,self.y),titleRect) and clickFrame) then self._dragging=true;self._drag_offset=mousePos-Vector2.new(self.x,self.y) ;end if self._dragging then if self._inputs.m1.held then self.x=mousePos.x-self._drag_offset.x ;self.y=mousePos.y-self._drag_offset.y ;else self._dragging=false;end end local numTabs= #self._tree['_tabs'];for tI,tab in ipairs(self._tree['_tabs']) do local tabOpen=self._active_tab==tab['name'] ;local tabW=((self.w-12) -((numTabs-1) * 2))/numTabs ;local tabPos=Vector2.new(self.x + 6 + ((tI-1) * (tabW + 2)) ,self.y + self._title_h + 6 );tab['_drawings'][1].Position=tabPos;tab['_drawings'][1].Size=Vector2.new(tabW,self._tab_h);tab['_drawings'][1].Transparency=baseOpacity;tab['_drawings'][1].Visible=childrenVisible;tab['_drawings'][3].Position=tabPos;tab['_drawings'][3].Size=Vector2.new(tabW,1);tab['_drawings'][3].Transparency=baseOpacity;tab['_drawings'][3].Visible=tabOpen and childrenVisible ;tab['_drawings'][4].Position=tabPos + Vector2.new(4,4) ;tab['_drawings'][4].Transparency=baseOpacity;tab['_drawings'][4].Visible=childrenVisible;if (clickFrame and self._IsMouseWithinBounds(tabPos,Vector2.new(tabW,self._tab_h))) then self._active_tab=tab['name'];end if tabOpen then local secY=(self._padding * 2) + self._tab_h + self._title_h ;for _,section in ipairs(tab['_sections']) do local secPos=Vector2.new(self.x + 10 ,self.y + secY );local secW=self.w-20 ;local itemY=20;for _,item in ipairs(section._items) do local itemPos=secPos + Vector2.new(10,itemY) ;if (item.type=="checkbox") then local boxS=Vector2.new(15,15);item._drawings[1].Position=itemPos;item._drawings[1].Size=boxS;item._drawings[1].Visible=childrenVisible;item._drawings[2].Position=itemPos + Vector2.new(1,1) ;item._drawings[2].Size=boxS-Vector2.new(2,2) ;item._drawings[2].Visible=item.value and childrenVisible ;item._drawings[3].Position=itemPos + Vector2.new(1,boxS.y-2 ) ;item._drawings[3].Size=Vector2.new(boxS.x-2 ,1);item._drawings[3].Visible=item.value and childrenVisible ;item._drawings[4].Position=itemPos + Vector2.new(22,0) ;item._drawings[4].Visible=childrenVisible;if (self._IsMouseWithinBounds(itemPos,Vector2.new(secW-20 ,16)) and clickFrame) then item.value= not item.value;if item.callback then item.callback(item.value);end end itemY=itemY + 25 ;elseif (item.type=="slider") then local sliderW=secW-30 ;item._drawings[5].Position=itemPos;item._drawings[5].Visible=childrenVisible;item._drawings[1].Position=itemPos + Vector2.new(0,15) ;item._drawings[1].Size=Vector2.new(sliderW,10);item._drawings[1].Visible=childrenVisible;local pct=(item.value-item.min)/(item.max-item.min) ;item._drawings[2].Position=itemPos + Vector2.new(1,16) ;item._drawings[2].Size=Vector2.new((sliderW-2) * pct ,8);item._drawings[2].Visible=childrenVisible;item._drawings[4].Position=itemPos + Vector2.new(sliderW-40 ,0) ;item._drawings[4].Text=tostring(item.value)   .. (item.appendix or "") ;item._drawings[4].Visible=childrenVisible;if (self._inputs.m1.held and self._IsMouseWithinBounds(itemPos + Vector2.new(0,15) ,Vector2.new(sliderW,10))) then local mx=mousePos.x-itemPos.x ;local newPct=clamp(mx/sliderW ,0,1);local newVal=math.floor(((item.min + ((item.max-item.min) * newPct))/item.step) + 0.5 ) * item.step ;if (newVal~=item.value) then item.value=newVal;if item.callback then item.callback(newVal);end end end itemY=itemY + 35 ;elseif (item.type=="choice") then local choiceW=secW-30 ;local choiceH=20;item._drawings[4].Position=itemPos;item._drawings[4].Visible=childrenVisible;item._drawings[1].Position=itemPos + Vector2.new(0,15) ;item._drawings[1].Size=Vector2.new(choiceW,choiceH);item._drawings[1].Visible=childrenVisible;item._drawings[2].Position=itemPos + Vector2.new(2,17) ;item._drawings[2].Size=Vector2.new(choiceW-4 ,choiceH-4 );item._drawings[2].Visible=childrenVisible;local displayText=item.value;if (type(item.value)=="table") then if ( #item.value>0) then displayText=table.concat(item.value,", ");if ( #displayText>20) then displayText= #item.value   .. " selected" ;end else displayText="None";end end item._drawings[3].Position=itemPos + Vector2.new(4,18) ;item._drawings[3].Text=tostring(displayText);item._drawings[3].Visible=childrenVisible;if (clickFrame and self._IsMouseWithinBounds(itemPos + Vector2.new(0,15) ,Vector2.new(choiceW,choiceH))) then local cb=function(val) if (type(item.value)=="table") then local found=false;for i,v in ipairs(item.value) do if (v==val) then table.remove(item.value,i);found=true;break;end end if  not found then table.insert(item.value,val);end if item.callback then item.callback(item.value);end else item.value=val;if item.callback then item.callback(val);end end end;clickFrame=false;self:_SpawnDropdown(item.value,item.choices,cb,itemPos + Vector2.new(0,35) ,choiceW);end itemY=itemY + 40 ;elseif (item.type=="dual_choice") then local fullW=secW-30 ;local halfW=(fullW/2) -5 ;local choiceH=20;local pos1=itemPos + Vector2.new(0,15) ;local pos2=itemPos + Vector2.new(halfW + 10 ,15) ;item._drawings[4].Position=itemPos;item._drawings[4].Visible=childrenVisible;item._drawings[1].Position=pos1;item._drawings[1].Size=Vector2.new(halfW,choiceH);item._drawings[1].Visible=childrenVisible;item._drawings[2].Position=pos1 + Vector2.new(1,1) ;item._drawings[2].Size=Vector2.new(halfW-2 ,choiceH-2 );item._drawings[2].Visible=childrenVisible;local dt1=item.v1;if (type(dt1)=="table") then if ( #dt1>0) then dt1=table.concat(dt1,", ");if ( #dt1>10) then dt1= #item.v1   .. " sel" ;end else dt1="None";end end item._drawings[3].Position=pos1 + Vector2.new(4,3) ;item._drawings[3].Text=tostring(dt1);item._drawings[3].Visible=childrenVisible;item._drawings[8].Position=itemPos + Vector2.new(halfW + 10 ,0) ;item._drawings[8].Visible=childrenVisible;item._drawings[5].Position=pos2;item._drawings[5].Size=Vector2.new(halfW,choiceH);item._drawings[5].Visible=childrenVisible;item._drawings[6].Position=pos2 + Vector2.new(1,1) ;item._drawings[6].Size=Vector2.new(halfW-2 ,choiceH-2 );item._drawings[6].Visible=childrenVisible;local dt2=item.v2;if (type(dt2)=="table") then if ( #dt2>0) then dt2=table.concat(dt2,", ");if ( #dt2>10) then dt2= #item.v2   .. " sel" ;end else dt2="None";end end item._drawings[7].Position=pos2 + Vector2.new(4,3) ;item._drawings[7].Text=tostring(dt2);item._drawings[7].Visible=childrenVisible;if (clickFrame and self._IsMouseWithinBounds(pos1,Vector2.new(halfW,choiceH))) then local cb=function(val) if (type(item.v1)=="table") then local found=false;for i,v in ipairs(item.v1) do if (v==val) then table.remove(item.v1,i);found=true;break;end end if  not found then table.insert(item.v1,val);end if item.cb1 then item.cb1(item.v1);end else item.v1=val;if item.cb1 then item.cb1(val);end end end;clickFrame=false;self:_SpawnDropdown(item.v1,item.ch1,cb,pos1 + Vector2.new(0,choiceH) ,halfW);end if (clickFrame and self._IsMouseWithinBounds(pos2,Vector2.new(halfW,choiceH))) then local cb=function(val) if (type(item.v2)=="table") then local found=false;for i,v in ipairs(item.v2) do if (v==val) then table.remove(item.v2,i);found=true;break;end end if  not found then table.insert(item.v2,val);end if item.cb2 then item.cb2(item.v2);end else item.v2=val;if item.cb2 then item.cb2(val);end end end;clickFrame=false;self:_SpawnDropdown(item.v2,item.ch2,cb,pos2 + Vector2.new(0,choiceH) ,halfW);end itemY=itemY + 40 ;end end section._drawings[4].Position=secPos + Vector2.new(10, -8) ;section._drawings[4].Visible=childrenVisible;section._drawings[3].Position=secPos;section._drawings[3].Size=Vector2.new(secW,itemY);section._drawings[3].Visible=childrenVisible;secY=secY + itemY + 10 ;end else for _,s in pairs(tab._sections) do undrawAll(s._drawings);for _,i in pairs(s._items) do undrawAll(i._drawings);end end end end if self._active_dropdown then local dd=self._active_dropdown;local ddY=0;dd._drawings[1].Position=dd.pos;dd._drawings[1].Visible=childrenVisible;dd._drawings[2].Position=dd.pos;dd._drawings[2].Visible=childrenVisible;for i,choice in ipairs(dd.choices) do local t=dd._drawings[i + 2 ];t.Position=dd.pos + Vector2.new(4,ddY + 2 ) ;t.Visible=childrenVisible;if (clickFrame and self._IsMouseWithinBounds(dd.pos + Vector2.new(0,ddY) ,Vector2.new(dd.w,16))) then dd.callback(choice);clickFrame=false;end ddY=ddY + 16 ;end dd._drawings[1].Size=Vector2.new(dd.w,ddY + 4 );dd._drawings[2].Size=Vector2.new(dd.w,ddY + 4 );if (clickFrame and  not self._IsMouseWithinBounds(dd.pos,Vector2.new(dd.w,ddY))) then self:_RemoveDropdown();else clickFrame=false;end end self._tick=os.clock();end;local Workspace=game:GetService("Workspace");local RocksBase=Workspace:WaitForChild("Rocks");local LivingFolder=Workspace:WaitForChild("Living");local Settings={Active=false,MobFarm=false,ClickDelay=0.1,MovementSpeed=0.1,SpeedCap=3,SafeRadius=20,MobAvoidDist=20,MobFarmRange=1000,AvoidStrength=5,PlayerMiningDist=10,DebugMode=false,TargetLocations={"Island2VolcanicDepths"},TargetRocks={},TargetMobs={}};local CurrentStatus="Idle";local function get_distance(pos1,pos2) if ( not pos1 or  not pos2) then return 999999;end local dx,dy,dz=pos1.X-pos2.X ,pos1.Y-pos2.Y ,pos1.Z-pos2.Z ;return math.sqrt((dx * dx) + (dy * dy) + (dz * dz) );end local function GetRockTypes() local types={};local seen={};if Settings.TargetLocations then for _,locationName in ipairs(Settings.TargetLocations) do local folder=RocksBase:FindFirstChild(locationName);if folder then for _,child in ipairs(folder:GetChildren()) do if (child:IsA("Part") or child:IsA("MeshPart")) then local model=child:FindFirstChildOfClass("Model");if (model and  not seen[model.Name]) then table.insert(types,model.Name);seen[model.Name]=true;end end end end end end table.sort(types);return types;end local function GetMobTypes() local types={};local seen={};if LivingFolder then for _,child in ipairs(LivingFolder:GetChildren()) do if child:IsA("Model") then local humanoid=child:FindFirstChild("Humanoid");if (humanoid and  not humanoid:FindFirstChild("Status")) then local cleanName=string.gsub(child.Name,"%d+$","");cleanName=string.match(cleanName,"^%s*(.-)%s*$") or cleanName ;if  not seen[cleanName] then table.insert(types,cleanName);seen[cleanName]=true;end end end end end table.sort(types);return types;end local function get_rock_hp(veinModel) if  not veinModel then return nil;end local infoFrame=veinModel:FindFirstChild("infoFrame");if infoFrame then local frame=infoFrame:FindFirstChild("Frame");if frame then local hpLabel=frame:FindFirstChild("rockHP");if hpLabel then local text=hpLabel.Text;local number=tonumber(string.match(text,"%d+"));return number;end end end return nil;end local function is_target_safe(targetPos) local entities=LivingFolder:GetChildren();for _,entity in ipairs(entities) do if (entity:IsA("Model") and (entity.Name~=LocalPlayer.Name)) then local root=entity:FindFirstChild("HumanoidRootPart");if root then local dist=get_distance(targetPos,root.Position);local humanoid=entity:FindFirstChild("Humanoid");if humanoid then if  not humanoid:FindFirstChild("Status") then if (dist<Settings.SafeRadius) then return false;end elseif (dist<Settings.PlayerMiningDist) then return false;end end end end end return true;end local function get_avoidance_vector(currentPos) local totalPushX,totalPushY=0,0;local entities=LivingFolder:GetChildren();for _,entity in ipairs(entities) do if entity:IsA("Model") then local humanoid=entity:FindFirstChild("Humanoid");if (humanoid and  not humanoid:FindFirstChild("Status")) then local root=entity:FindFirstChild("HumanoidRootPart");if root then local dist=get_distance(currentPos,root.Position);if ((dist<Settings.MobAvoidDist) and (dist>0.1)) then local pushX,pushZ=currentPos.X-root.Position.X ,currentPos.Z-root.Position.Z ;local pushDist=math.sqrt((pushX * pushX) + (pushZ * pushZ) );local weight=(Settings.MobAvoidDist-dist)/Settings.MobAvoidDist ;totalPushX=totalPushX + ((pushX/pushDist) * weight) ;totalPushY=totalPushY + ((pushZ/pushDist) * weight) ;end end end end end return totalPushX,totalPushY;end local function move_to_position(targetCenter,stopDistOverride,ignoreAvoidance) local character=LocalPlayer.Character;if  not character then return;end local hrp=character:FindFirstChild("HumanoidRootPart");if  not hrp then return;end local currentPos=hrp.Position;local camera=Workspace.CurrentCamera;if camera then pcall(function() if (Camera and Camera.lookAt) then Camera.lookAt(camera.Position,targetCenter);elseif camera.lookAt then camera:lookAt(camera.Position,targetCenter);end end);end local dx=currentPos.X-targetCenter.X ;local dz=currentPos.Z-targetCenter.Z ;local distToCenter=math.sqrt((dx * dx) + (dz * dz) );local STOP_DIST=stopDistOverride or 5 ;if (distToCenter>0.1) then local dirX,dirZ=dx/distToCenter ,dz/distToCenter ;local destX=targetCenter.X + (dirX * STOP_DIST) ;local destZ=targetCenter.Z + (dirZ * STOP_DIST) ;if (STOP_DIST<=0.5) then destX=targetCenter.X;destZ=targetCenter.Z;end local targetPos=Vector3.new(destX,targetCenter.Y,destZ);local distToDest=get_distance(targetPos,currentPos);local avoidX,avoidZ=0,0;local isAvoiding=false;if  not ignoreAvoidance then avoidX,avoidZ=get_avoidance_vector(currentPos);isAvoiding=(math.abs(avoidX)>0.01) or (math.abs(avoidZ)>0.01) ;end if ((distToDest>1) or isAvoiding) then local moveX=destX-currentPos.X ;local moveZ=destZ-currentPos.Z ;local moveDist=math.sqrt((moveX * moveX) + (moveZ * moveZ) );local moveDirX=0;local moveDirZ=0;if (moveDist>0.01) then moveDirX=moveX/moveDist ;moveDirZ=moveZ/moveDist ;end local finalDirX=moveDirX + (avoidX * Settings.AvoidStrength) ;local finalDirZ=moveDirZ + (avoidZ * Settings.AvoidStrength) ;local finalDist=math.sqrt((finalDirX * finalDirX) + (finalDirZ * finalDirZ) );if (finalDist>0) then finalDirX=finalDirX/finalDist ;finalDirZ=finalDirZ/finalDist ;end local moveStep=distToDest * Settings.MovementSpeed ;if (moveStep>Settings.SpeedCap) then moveStep=Settings.SpeedCap;end if ( not isAvoiding and (moveStep>distToDest)) then moveStep=distToDest;end local newX=currentPos.X + (finalDirX * moveStep) ;local newZ=currentPos.Z + (finalDirZ * moveStep) ;local newY=targetCenter.Y;hrp.Position=Vector3.new(newX,newY,newZ);hrp.AssemblyLinearVelocity=Vector3.new(finalDirX * 50 ,0,finalDirZ * 50 );else hrp.AssemblyLinearVelocity=Vector3.new(0,0,0);end else hrp.AssemblyLinearVelocity=Vector3.new(0,0,0);end end local function find_target() if ( #Settings.TargetLocations==0) then return nil,nil;end local closestTarget,closestHitbox,minDistance=nil,nil,9999999;local character=LocalPlayer.Character;if  not character then return nil,nil;end local hrp=character:FindFirstChild("HumanoidRootPart");if  not hrp then return nil,nil;end local myPos=hrp.Position;for _,locationName in ipairs(Settings.TargetLocations) do local folder=RocksBase:FindFirstChild(locationName);if folder then for _,spawnLocation in ipairs(folder:GetChildren()) do local veinModel=spawnLocation:FindFirstChildOfClass("Model");if veinModel then local rockName=veinModel.Name;local allowed=false;if ( #Settings.TargetRocks==0) then allowed=false;else for _,target in ipairs(Settings.TargetRocks) do if (target==rockName) then allowed=true;break;end end end if  not allowed then continue;end local hitbox=veinModel:FindFirstChild("Hitbox");if (hitbox and is_target_safe(hitbox.Position)) then local dist=get_distance(myPos,hitbox.Position);if (dist<minDistance) then minDistance=dist;closestTarget=spawnLocation;closestHitbox=hitbox;end end end end end end return closestTarget,closestHitbox;end local function find_mob_target() local children=LivingFolder:GetChildren();local closestMob,closestRoot,minDistance=nil,nil,Settings.MobFarmRange;local character=LocalPlayer.Character;if  not character then return nil,nil;end local hrp=character:FindFirstChild("HumanoidRootPart");if  not hrp then return nil,nil;end local myPos=hrp.Position;local checkCount=0;for _,entity in ipairs(children) do checkCount=checkCount + 1 ;if ((checkCount%100)==0) then task.wait();end if entity:IsA("Model") then local humanoid=entity:FindFirstChild("Humanoid");if (humanoid and  not humanoid:FindFirstChild("Status")) then local mobAllowed=false;local cleanEntityName=string.gsub(entity.Name,"%d+$","");cleanEntityName=string.match(cleanEntityName,"^%s*(.-)%s*$") or cleanEntityName ;if ( #Settings.TargetMobs==0) then mobAllowed=true;else for _,target in ipairs(Settings.TargetMobs) do if (target==cleanEntityName) then mobAllowed=true;break;end end end if mobAllowed then local root=entity:FindFirstChild("HumanoidRootPart");if (root and (humanoid.Health>0)) then local dist=get_distance(myPos,root.Position);if (dist<minDistance) then minDistance=dist;closestMob=entity;closestRoot=root;end end end end end end return closestMob,closestRoot;end spawn(function() while true do if Settings.Active then local target,hitbox=find_target();if (target and hitbox) then local veinModel=hitbox.Parent;CurrentStatus="Mining "   .. veinModel.Name ;local adaptiveDist=5;local hpLast=get_rock_hp(veinModel) or 99999 ;local timeLastDamage=os.clock();while Settings.Active and target.Parent  do local char=LocalPlayer.Character;local hrp=char and char:FindFirstChild("HumanoidRootPart") ;if myGui._open then CurrentStatus="Paused (Menu Open)";if hrp then hrp.AssemblyLinearVelocity=Vector3.new(0,0,0);end break;end local currentHP=get_rock_hp(veinModel);if currentHP then if (currentHP<hpLast) then hpLast=currentHP;timeLastDamage=os.clock();elseif ((os.clock() -timeLastDamage)>2) then adaptiveDist=adaptiveDist-1 ;if (adaptiveDist<3) then adaptiveDist=6;end timeLastDamage=os.clock();end end if (hitbox and hitbox.Parent) then if  not is_target_safe(hitbox.Position) then CurrentStatus="Unsafe! Relocating...";break;end move_to_position(hitbox.Position,adaptiveDist,false);if hrp then local dist=get_distance(hrp.Position,hitbox.Position);if (dist<=6) then pcall(function() mouse1click();keypress(49);keyrelease(49);end);end end else break;end wait(Settings.ClickDelay);end wait(0.1);else CurrentStatus="Searching Rocks...";local char=LocalPlayer.Character;if char then local hrp=char:FindFirstChild("HumanoidRootPart");if hrp then local currentPos=hrp.Position;local avoidX,avoidZ=get_avoidance_vector(currentPos);local avoidMag=math.sqrt((avoidX * avoidX) + (avoidZ * avoidZ) );if (avoidMag>0) then local moveDirX,moveDirZ=avoidX/avoidMag ,avoidZ/avoidMag ;local moveStep=Settings.SpeedCap;local newX,newZ=currentPos.X + (moveDirX * moveStep) ,currentPos.Z + (moveDirZ * moveStep) ;hrp.Position=Vector3.new(newX,currentPos.Y,newZ);hrp.AssemblyLinearVelocity=Vector3.new(moveDirX * 50 ,0,moveDirZ * 50 );else hrp.AssemblyLinearVelocity=Vector3.new(0,0,0);end end end wait(0.1);end elseif Settings.MobFarm then local mob,mobRoot=find_mob_target();if (mob and mobRoot) then CurrentStatus="Killing "   .. mob.Name ;while Settings.MobFarm and mob.Parent and mob:FindFirstChild("Humanoid") and (mob.Humanoid.Health>0)  do local char=LocalPlayer.Character;local hrp=char and char:FindFirstChild("HumanoidRootPart") ;if myGui._open then CurrentStatus="Paused (Menu Open)";if hrp then hrp.AssemblyLinearVelocity=Vector3.new(0,0,0);end break;end if mobRoot then move_to_position(mobRoot.Position,0,true);if hrp then local dist=get_distance(hrp.Position,mobRoot.Position);if (dist<=5) then pcall(function() mouse1click();keypress(50);keyrelease(50);end);end end end wait(Settings.ClickDelay);end else CurrentStatus="Searching Mobs...";end wait(0.1);else CurrentStatus="Paused";wait(0.2);end wait(0.05);end end);local function getStatus() return CurrentStatus;end myGui=UILib.new("Matcha Miner",Vector2.new(400,420),{getStatus});local locations={};for _,folder in ipairs(RocksBase:GetChildren()) do table.insert(locations,folder.Name);end local mineTab=myGui:Tab("Mining");local mineSection=myGui:Section(mineTab,"Configuration");myGui:Checkbox(mineTab,mineSection,"Enable Miner",false,function(state) Settings.Active=state;end);local dualItem;dualItem=myGui:DualChoice(mineTab,mineSection,"Targets",{},function(val) Settings.TargetRocks=val;end,GetRockTypes(),"Location",{"Island2VolcanicDepths"},function(val) if (type(val)=="table") then Settings.TargetLocations=val;local newRocks=GetRockTypes();if dualItem then dualItem.ch1=newRocks;end print("Locations updated: "   .. table.concat(val,", ") );else Settings.TargetLocations={val};end end,locations);local mobTab=myGui:Tab("Mob Farming");local mobSection=myGui:Section(mobTab,"Configuration");myGui:Checkbox(mobTab,mobSection,"Enable Mob Farm",false,function(state) Settings.MobFarm=state;end);local mobDualItem;mobDualItem=myGui:DualChoice(mobTab,mobSection,"Mob Targets",{},function(val) Settings.TargetMobs=val;end,GetMobTypes(),"Refresh Mobs","Click",function() if mobDualItem then mobDualItem.ch1=GetMobTypes();print("Mob list refreshed");end end,{"Click"});local setTab=myGui:Tab("Settings");local moveSection=myGui:Section(setTab,"Movement");myGui:Slider(setTab,moveSection,"Speed Cap",Settings.SpeedCap,function(v) Settings.SpeedCap=v;end,1,10,1," studs");myGui:Slider(setTab,moveSection,"Smoothness",Settings.MovementSpeed,function(v) Settings.MovementSpeed=v;end,0.01,1,0.01,"");myGui:Slider(setTab,moveSection,"Click Delay",Settings.ClickDelay,function(v) Settings.ClickDelay=v;end,0.01,1,0.01,"s");local safeTab=myGui:Tab("Safety");local safeSection=myGui:Section(safeTab,"Avoidance");myGui:Slider(safeTab,safeSection,"Mob Safe Radius",Settings.SafeRadius,function(v) Settings.SafeRadius=v;end,10,100,5," studs");myGui:Slider(safeTab,safeSection,"Player Dist",Settings.PlayerMiningDist,function(v) Settings.PlayerMiningDist=v;end,5,50,5," studs");myGui:Slider(safeTab,safeSection,"Mob Evade Dist",Settings.MobAvoidDist,function(v) Settings.MobAvoidDist=v;end,10,50,5," studs");myGui:Slider(safeTab,safeSection,"Evade Force",Settings.AvoidStrength,function(v) Settings.AvoidStrength=v;end,1,10,0.5,"");myGui:Slider(safeTab,safeSection,"Mob Farm Range",Settings.MobFarmRange,function(v) Settings.MobFarmRange=v;end,100,5000,100," studs");while true do if iskeypressed(35) then myGui:ToggleMenu( not myGui._open);while iskeypressed(35) do wait(0.05);end end myGui:Step();wait(0.005);end end
